class TestHTMLParser < MiniTest::Unit::TestCase
  def test_simple
    html = File.read("test/assets/html_parser/test1.html")
    links = Crawler::HTMLParser.new("http://example.com", html).get_links
    assert_equal links, ["http://www.iana.org/domains/example", "http://example.com/example.html"]
  end
  
  def test_wikipedia
    html = File.read("test/assets/html_parser/test2.html")
    links = Crawler::HTMLParser.new("http://de.wikipedia.org/wiki/Startseite", html).get_links
    assert_equal links, ["http://de.wikipedia.org/wiki/Startseite", "http://de.wikipedia.org/wiki/Startseite", "http://de.wikipedia.org/wiki/Wikipedia:%C3%9Cber_Wikipedia", "http://de.wikipedia.org/wiki/Freie_Inhalte", "http://de.wikipedia.org/wiki/Hilfe:Neu_bei_Wikipedia", "http://de.wikipedia.org/wiki/Spezial:Statistik", "http://de.wikipedia.org/wiki/Portal:Geographie", "http://de.wikipedia.org/wiki/Portal:Geographie", "http://de.wikipedia.org/wiki/Portal:Geschichte", "http://de.wikipedia.org/wiki/Portal:Geschichte", "http://de.wikipedia.org/wiki/Portal:Gesellschaft", "http://de.wikipedia.org/wiki/Portal:Gesellschaft", "http://de.wikipedia.org/wiki/Portal:Kunst_und_Kultur", "http://de.wikipedia.org/wiki/Portal:Kunst_und_Kultur", "http://de.wikipedia.org/wiki/Portal:Religion", "http://de.wikipedia.org/wiki/Portal:Religion", "http://de.wikipedia.org/wiki/Portal:Sport", "http://de.wikipedia.org/wiki/Portal:Sport", "http://de.wikipedia.org/wiki/Portal:Technik", "http://de.wikipedia.org/wiki/Portal:Technik", "http://de.wikipedia.org/wiki/Portal:Wissenschaft", "http://de.wikipedia.org/wiki/Portal:Wissenschaft", "http://de.wikipedia.org/wiki/Portal:Wikipedia_nach_Themen", "http://de.wikipedia.org/wiki/Spezial:Alle_Seiten", "http://de.wikipedia.org/wiki/Kategorie:!Hauptkategorie", "http://de.wikipedia.org/wiki/Portal:Gesprochene_Wikipedia", "http://de.wikipedia.org/wiki/Wikipedia:Kontakt", "http://de.wikipedia.org/wiki/Wikipedia:Presse", "http://de.wikipedia.org/wiki/Wikipedia:Statistik", "http://de.wikipedia.org/wiki/Wikipedia:Sprachen", "http://de.wikipedia.org/wiki/Hilfe:Neu_bei_Wikipedia", "http://de.wikipedia.org/wiki/Wikipedia:Mentorenprogramm", "http://eo.wikipedia.org/wiki/", "http://de.wikipedia.org/wiki/Datei:Elias_Canetti_2.jpg", "http://de.wikipedia.org/wiki/Elias_Canetti", "http://de.wikipedia.org/wiki/Elias_Canetti", "http://de.wikipedia.org/wiki/Wikipedia:Hauptseite/Artikel_des_Tages/Chronologie_2014", "http://de.wikipedia.org/wiki/Wikipedia:Exzellente_Artikel", "http://de.wikipedia.org/wiki/Wikipedia:Lesenswerte_Artikel", "http://de.wikipedia.org/w/api.php?action=featuredfeed&feed=featured&feedformat=atom", "http://de.wikipedia.org/w/api.php?action=featuredfeed&feed=featured&feedformat=atom", "http://de.wikipedia.org/wiki/1889", "http://de.wikipedia.org/wiki/Willi_M%C3%BCnzenberg", "http://de.wikipedia.org/wiki/1904", "http://de.wikipedia.org/wiki/Russisch-Japanischer_Krieg", "http://de.wikipedia.org/wiki/Seegefecht_bei_Ulsan", "http://de.wikipedia.org/wiki/Datei:Big_Hole,_Kimberley.jpg", "http://de.wikipedia.org/wiki/1914", "http://de.wikipedia.org/wiki/The_Big_Hole", "http://de.wikipedia.org/wiki/Kimberley_(S%C3%BCdafrika)", "http://de.wikipedia.org/wiki/Diamant", "http://de.wikipedia.org/wiki/1919", "http://de.wikipedia.org/wiki/Weimarer_Republik", "http://de.wikipedia.org/wiki/Weimarer_Verfassung", "http://de.wikipedia.org/wiki/1974", "http://de.wikipedia.org/wiki/Panavia_Tornado", "http://de.wikipedia.org/wiki/14._August", "http://de.wikipedia.org/w/api.php?action=featuredfeed&feed=onthisday&feedformat=atom", "http://de.wikipedia.org/w/api.php?action=featuredfeed&feed=onthisday&feedformat=atom", "http://de.wikipedia.org/wiki/Islamischer_Staat_(Organisation)", "http://de.wikipedia.org/wiki/Leichtathletik-Europameisterschaften_2014", "http://de.wikipedia.org/wiki/Comprehensive_Economic_and_Trade_Agreement", "http://de.wikipedia.org/wiki/Datei:Maryam_Mirzakhani_2014-08-12_18-14.jpg", "http://de.wikipedia.org/wiki/CA_San_Lorenzo_de_Almagro", "http://de.wikipedia.org/wiki/Club_Nacional", "http://de.wikipedia.org/wiki/Copa_Libertadores_2014", "http://de.wikipedia.org/wiki/Maryam_Mirzakhani", "http://de.wikipedia.org/wiki/Fields-Medaille", "http://de.wikipedia.org/wiki/Artur_%C3%81vila", "http://de.wikipedia.org/wiki/Manjul_Bhargava", "http://de.wikipedia.org/wiki/Martin_Hairer", "http://de.wikipedia.org/wiki/Russland", "http://de.wikipedia.org/wiki/Edward_Snowden", "http://de.wikipedia.org/wiki/August_2014", "http://de.wikinews.org/wiki/Hauptseite", "http://de.wikipedia.org/wiki/Kurt_Tschenscher", "http://de.wikipedia.org/wiki/Jean-Jacques_Avenel", "http://de.wikipedia.org/wiki/Lauren_Bacall", "http://de.wikipedia.org/wiki/Kathleen_Ollerenshaw", "http://de.wikipedia.org/wiki/Ed_Nelson", "http://de.wikipedia.org/wiki/Nekrolog_2014", "http://de.wikipedia.org/wiki/Datei:Mary_Engle_Pennington_(1872-1952).jpg", "http://de.wikipedia.org/wiki/Mary_Engle_Pennington", "http://de.wikipedia.org/wiki/Adam_Rainer", "http://de.wikipedia.org/wiki/Evangelische_Martinskirche_(Wehrda)", "http://de.wikipedia.org/wiki/Time-Auswahl_der_besten_100_englischsprachigen_Romane_von_1923_bis_2005", "http://de.wikipedia.org/wiki/Spezial:Neue_Seiten", "http://de.wikipedia.org/wiki/Wikipedia:Hauptseite/Schon_gewusst/Archiv", "http://meta.wikimedia.org/wiki/Hauptseite?uselang=de", "http://meta.wikimedia.org/wiki/Hauptseite?uselang=de", "http://commons.wikimedia.org/wiki/Hauptseite?uselang=de", "http://commons.wikimedia.org/wiki/Hauptseite?uselang=de", "http://de.wiktionary.org/wiki/Wiktionary:Hauptseite", "http://de.wiktionary.org/wiki/Wiktionary:Hauptseite", "http://de.wikibooks.org/wiki/Hauptseite", "http://de.wikibooks.org/wiki/Hauptseite", "http://de.wikiquote.org/wiki/Hauptseite", "http://de.wikiquote.org/wiki/Hauptseite", "http://de.wikiversity.org/wiki/Hauptseite", "http://de.wikiversity.org/wiki/Hauptseite", "http://de.wikisource.org/wiki/Hauptseite", "http://de.wikisource.org/wiki/Hauptseite", "http://de.wikinews.org/wiki/Hauptseite", "http://de.wikinews.org/wiki/Hauptseite", "http://www.wikidata.org/wiki/Wikidata:Hauptseite?uselang=de", "http://www.wikidata.org/wiki/Wikidata:Hauptseite?uselang=de", "http://de.wikivoyage.org/wiki/Hauptseite", "http://de.wikivoyage.org/wiki/Hauptseite", "http://de.wikipedia.org/w/index.php?title=Wikipedia:Hauptseite&oldid=132221329", "http://de.wikipedia.org/wiki/Wikipedia:Kategorien", "http://de.wikipedia.org/wiki/Kategorie:Wikipedia:Hauptseite", "http://de.wikipedia.org/w/index.php?title=Spezial:Anmelden&returnto=Wikipedia%3AHauptseite&type=signup", "http://de.wikipedia.org/w/index.php?title=Spezial:Anmelden&returnto=Wikipedia%3AHauptseite", "http://de.wikipedia.org/wiki/Wikipedia:Hauptseite", "http://de.wikipedia.org/wiki/Wikipedia_Diskussion:Hauptseite", "http://de.wikipedia.org/wiki/Startseite", "http://de.wikipedia.org/wiki/Wikipedia:Hauptseite", "http://de.wikipedia.org/w/index.php?title=Wikipedia:Hauptseite&action=edit", "http://de.wikipedia.org/w/index.php?title=Wikipedia:Hauptseite&action=history", "http://de.wikipedia.org/wiki/Startseite", "http://de.wikipedia.org/wiki/Wikipedia:Hauptseite", "http://de.wikipedia.org/wiki/Wikipedia:Hauptseite", "http://de.wikipedia.org/wiki/Portal:Wikipedia_nach_Themen", "http://de.wikipedia.org/wiki/Spezial:Alle_Seiten", "http://de.wikipedia.org/wiki/Spezial:Zuf%C3%A4llige_Seite", "http://de.wikipedia.org/wiki/Wikipedia:Beteiligen", "http://de.wikipedia.org/wiki/Hilfe:Neuen_Artikel_anlegen", "http://de.wikipedia.org/wiki/Wikipedia:Autorenportal", "http://de.wikipedia.org/wiki/Hilfe:%C3%9Cbersicht", "http://de.wikipedia.org/wiki/Spezial:Letzte_%C3%84nderungen", "http://de.wikipedia.org/wiki/Wikipedia:Kontakt", "http://donate.wikimedia.org/wiki/Special:FundraiserRedirector?utm_source=donate&utm_medium=sidebar&utm_campaign=C13_de.wikipedia.org&uselang=de", "http://de.wikipedia.org/w/index.php?title=Spezial:Buch&bookcmd=book_creator&referer=Wikipedia%3AHauptseite", "http://de.wikipedia.org/w/index.php?title=Spezial:Buch&bookcmd=render_article&arttitle=Wikipedia%3AHauptseite&oldid=132221329&writer=rl", "http://de.wikipedia.org/w/index.php?title=Wikipedia:Hauptseite&printable=yes", "http://de.wikipedia.org/wiki/Spezial:Linkliste/Wikipedia:Hauptseite", "http://de.wikipedia.org/wiki/Spezial:%C3%84nderungen_an_verlinkten_Seiten/Wikipedia:Hauptseite", "http://de.wikipedia.org/wiki/Spezial:Spezialseiten", "http://de.wikipedia.org/w/index.php?title=Wikipedia:Hauptseite&oldid=132221329", "http://de.wikipedia.org/w/index.php?title=Wikipedia:Hauptseite&action=info", "http://www.wikidata.org/wiki/Q5296", "http://als.wikipedia.org/wiki/", "http://ar.wikipedia.org/wiki/", "http://bar.wikipedia.org/wiki/", "http://ca.wikipedia.org/wiki/", "http://cs.wikipedia.org/wiki/", "http://da.wikipedia.org/wiki/", "http://dsb.wikipedia.org/wiki/", "http://el.wikipedia.org/wiki/", "http://en.wikipedia.org/wiki/", "http://es.wikipedia.org/wiki/", "http://fa.wikipedia.org/wiki/", "http://fi.wikipedia.org/wiki/", "http://fr.wikipedia.org/wiki/", "http://frp.wikipedia.org/wiki/", "http://frr.wikipedia.org/wiki/", "http://fy.wikipedia.org/wiki/", "http://he.wikipedia.org/wiki/", "http://hi.wikipedia.org/wiki/", "http://hr.wikipedia.org/wiki/", "http://hsb.wikipedia.org/wiki/", "http://hu.wikipedia.org/wiki/", "http://id.wikipedia.org/wiki/", "http://it.wikipedia.org/wiki/", "http://ja.wikipedia.org/wiki/", "http://ko.wikipedia.org/wiki/", "http://ksh.wikipedia.org/wiki/", "http://la.wikipedia.org/wiki/", "http://lb.wikipedia.org/wiki/", "http://li.wikipedia.org/wiki/", "http://lmo.wikipedia.org/wiki/", "http://nds.wikipedia.org/wiki/", "http://nl.wikipedia.org/wiki/", "http://no.wikipedia.org/wiki/", "http://pdc.wikipedia.org/wiki/", "http://pl.wikipedia.org/wiki/", "http://pt.wikipedia.org/wiki/", "http://rm.wikipedia.org/wiki/", "http://ro.wikipedia.org/wiki/", "http://ru.wikipedia.org/wiki/", "http://sk.wikipedia.org/wiki/", "http://sl.wikipedia.org/wiki/", "http://sq.wikipedia.org/wiki/", "http://sr.wikipedia.org/wiki/", "http://stq.wikipedia.org/wiki/", "http://sv.wikipedia.org/wiki/", "http://th.wikipedia.org/wiki/", "http://tr.wikipedia.org/wiki/", "http://uk.wikipedia.org/wiki/", "http://vi.wikipedia.org/wiki/", "http://yi.wikipedia.org/wiki/", "http://zh.wikipedia.org/wiki/", "http://de.wikipedia.org/wiki/Startseite", "http://de.wikipedia.org/wiki/Wikipedia:Lizenzbestimmungen_Commons_Attribution-ShareAlike_3.0_Unported", "http://wikimediafoundation.org/wiki/Nutzungsbedingungen", "http://de.wikipedia.org/wiki/Wikipedia:Datenschutz", "http://de.wikipedia.org/wiki/Wikipedia:Datenschutz", "http://de.wikipedia.org/wiki/Wikipedia:%C3%9Cber_Wikipedia", "http://de.wikipedia.org/wiki/Wikipedia:Impressum", "https://www.mediawiki.org/wiki/Special:MyLanguage/How_to_contribute", "http://de.m.wikipedia.org/wiki/Wikipedia:Hauptseite", "http://wikimediafoundation.org/", "http://www.mediawiki.org/"]
  end

end